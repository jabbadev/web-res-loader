(function(e,t){function i(){this.loadConfig=function(e,t,n){var i=this;this.jq=e,this.rlcURL=t,this._attachJS(this.rlcURL,function(){i.setConfig(r),n()})},this.setConfig=function(t){this.js=e[t].js,this.css=e[t].css,this.html=e[t].html},this._attachJS=function(e,t){if(e){var n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("charset","utf-8"),n.setAttribute("src",e),n.onload=t,n.onreadystatechange=function(){(this.readyState=="complete"||this.readyState=="loaded")&&t()},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(n)}else t()},this._attachCSS=function(e){if(e){var t=document.createElement("link");t.setAttribute("type","text/css"),t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(t)}},this._attachRES=function(e,t,n){this[e][t].isAttach||(typeof this[e][t].preLoad=="function"&&this[e][t].preLoad(),e=="js"&&this._attachJS(this[e][t].url,n),e=="css"&&(this._attachCSS(this[e][t].url),typeof this[e][t].postLoad=="function"&&this[e][t].postLoad()),this[e][t].isAttach=!0)},this._getChainRes=function(e,t){var n=this,r=function(e,t){this.resType=e,this.resName=t,this.dep=null,this.setAttach=function(){var e=this;this.attach=function(){e.resType=="js"&&n._attachRES(e.resType,e.resName,e.onload),e.resType=="css"&&n._attachRES(e.resType,e.resName)}},this.setOnLoad=function(e){var t=this;this.onload=function(){n._waitLoadHandler(t.resType,t.resName,t.dep,e)}}};return new r(e,t)},this._waitLoadHandler=function(e,t,n,r){n&&(this[e][t].isLoaded||!1)&&setTimeout(this._waitLoadHandler(e,t,n,r),0),this[e][t].isLoaded=!0,typeof this[e][t].postLoad=="function"&&this[e][t].postLoad(),r()},this._buildLoadChain=function(e,t,n,r){var i=this[e][t].depon;if(i)for(var s=0;s<i.length;s++){this._buildLoadChain(e,i[s],n,r);if(this.jq.inArray(i[s],r)==-1){var o=this._getChainRes(e,i[s]);o.setAttach(),e=="js"&&n.length>0&&(o.dep=n[n.length-1].resName,n[n.length-1].setOnLoad(o.attach)),n.push(o),r.push(i[s])}}},this._loadRes=function(t,n,r,i){var s=[],o=[];this._buildLoadChain(t,n,s,o);var u=this._getChainRes(t,n);u.setAttach(),t=="js"&&s.length>0&&(u.dep=s[s.length-1].resName,s[s.length-1].setOnLoad(u.attach)),s.push(u);var a=i||e,f=typeof r=="function"&&this.jq.proxy(r,a)||function(){};s[s.length-1].setOnLoad(f),t=="js"&&s[0].attach(),t=="css"&&(this.jq.each(s,function(e,t){t.attach()}),typeof r=="function"&&this.jq.proxy(r,a)())},this.checkConfig=function(e,t){return this[e][t]},this.loadJS=function(e,t,n){var r=this,i=null;this.jq.isArray(e)?(i=e.pop(),this.jq.each(e,function(e,t){r.checkConfig("js",t)&&r._loadRes("js",t)})):i=e,r.checkConfig("js",i)&&this._loadRes("js",i,t,n)},this.loadCSS=function(e,t,n){var r=this,i=null;this.jq.isArray(e)?(i=e.pop(),this.jq.each(e,function(e,t){r.checkConfig("css",t)&&r._loadRes("css",t)})):i=e,r.checkConfig("css",i)&&this._loadRes("css",i,t,n)},this.loadHTML=function(e,t,n,r,i){if(this.checkConfig("html",e)){var s=this.jq.proxy(t,r),o=this.jq.proxy(n,r);this.jq.ajax({async:i===undefined&&!0||i,url:this.html[e].url,success:s,error:o})}}}var n=t.wrlNS,r=t.wrlcNS;e[n]=new i})(window,{wrlNS:"wrl",wrlcNS:"wrlc"});